<!DOCTYPE html>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Fallback to default mdbook template -->
        
        <meta name="robots" content="noindex,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <title>CLI - LuaNext Documentation</title>
        <script>
            var theme = localStorage.getItem("mdbook-theme");
            if (theme === null || theme === undefined) { theme = "light"; }
            var html = document.querySelector("html");
            html.classList.remove("light");
            html.classList.add(theme);
        </script>
        <meta name="description" content="A typed superset of Lua with gradual typing, inspired by TypeScript">
        <link rel="icon" href="favicon.svg">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/custom.css">
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">

    </head>
    <body>
        <!-- Provide the book title to JavaScript -->
        <script>
            window.book = window.book || {};
            window.book.language = "en";
        </script>

        <div id="book" class="book">
            <div class="book-inner">

            <nav role="navigation" aria-label="Table of contents" class="sidebar">
                <ol class="chapter"><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="introduction.html">Introduction</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Language</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/basics.html"><strong aria-hidden="true">1.</strong> Basics</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/control-flow.html"><strong aria-hidden="true">2.</strong> Control Flow</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/functions.html"><strong aria-hidden="true">3.</strong> Functions</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/type-system.html"><strong aria-hidden="true">4.</strong> Type System</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/classes.html"><strong aria-hidden="true">5.</strong> Classes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/interfaces.html"><strong aria-hidden="true">6.</strong> Interfaces</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/enums.html"><strong aria-hidden="true">7.</strong> Enums</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/modules.html"><strong aria-hidden="true">8.</strong> Modules</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/pattern-matching.html"><strong aria-hidden="true">10.</strong> Pattern Matching</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/decorators.html"><strong aria-hidden="true">11.</strong> Decorators</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/advanced-types.html"><strong aria-hidden="true">12.</strong> Advanced Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/operators.html"><strong aria-hidden="true">13.</strong> Operators</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Guides</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/migrating-from-lua.html"><strong aria-hidden="true">14.</strong> Migrating from Lua</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/lua-targets.html"><strong aria-hidden="true">15.</strong> Lua Targets</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/cli.html"><strong aria-hidden="true">16.</strong> CLI</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/configuration.html"><strong aria-hidden="true">17.</strong> Configuration</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/standard-library.html"><strong aria-hidden="true">18.</strong> Standard Library</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/utility-types.html"><strong aria-hidden="true">19.</strong> Utility Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/reflection.html"><strong aria-hidden="true">20.</strong> Reflection API</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/error-codes.html"><strong aria-hidden="true">21.</strong> Error Codes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/grammar.html"><strong aria-hidden="true">22.</strong> Grammar</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/keywords.html"><strong aria-hidden="true">23.</strong> Keywords</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Contributing</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="contributing/setup.html"><strong aria-hidden="true">24.</strong> Getting Started</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">API Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="api/index.html"><strong aria-hidden="true">25.</strong> Rust API Docs</a></span></li></ol>
            </nav>

            <div id="page-wrapper" class="page-wrapper">

                <div class="page-inner">

                <section class="normal" id="main">
                    <h1 id="cli-reference"><a class="header" href="#cli-reference">CLI Reference</a></h1>
<p>Complete command-line interface reference for the LuaNext compiler.</p>
<h2 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h2>
<pre><code class="language-bash">luanext [OPTIONS] &lt;FILES&gt;...
luanext --init
luanext --help
luanext --version
</code></pre>
<h2 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h2>
<h3 id="compile-single-file"><a class="header" href="#compile-single-file">Compile Single File</a></h3>
<pre><code class="language-bash">luanext main.luax
</code></pre>
<p>Compiles <code>main.luax</code> to <code>main.lua</code> in the same directory.</p>
<h3 id="compile-multiple-files"><a class="header" href="#compile-multiple-files">Compile Multiple Files</a></h3>
<pre><code class="language-bash">luanext file1.luax file2.luax file3.luax
</code></pre>
<p>Compiles each file to corresponding <code>.lua</code> output.</p>
<h3 id="compile-with-glob-patterns"><a class="header" href="#compile-with-glob-patterns">Compile with Glob Patterns</a></h3>
<pre><code class="language-bash"># Compile all .luax files in src/
luanext "src/**/*.luax"

# Compile multiple patterns
luanext "src/**/*.luax" "tests/**/*.luax"
</code></pre>
<p><strong>Note:</strong> Use quotes around glob patterns to prevent shell expansion.</p>
<h3 id="specify-output-directory"><a class="header" href="#specify-output-directory">Specify Output Directory</a></h3>
<pre><code class="language-bash">luanext main.luax --out-dir dist/
</code></pre>
<p>Compiles <code>main.luax</code> to <code>dist/main.lua</code>.</p>
<h3 id="bundle-to-single-file"><a class="header" href="#bundle-to-single-file">Bundle to Single File</a></h3>
<pre><code class="language-bash">luanext "src/**/*.luax" --out-file bundle.lua
</code></pre>
<p>Compiles all files and concatenates them into <code>bundle.lua</code>.</p>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<h3 id="inputoutput"><a class="header" href="#inputoutput">Input/Output</a></h3>
<h4 id="files"><a class="header" href="#files"><code>&lt;FILES&gt;...</code></a></h4>
<p>Input files to compile. Supports glob patterns.</p>
<pre><code class="language-bash">luanext main.luax utils.luax
luanext "src/**/*.luax"
</code></pre>
<h4 id="-p---project-file"><a class="header" href="#-p---project-file"><code>-p, --project &lt;FILE&gt;</code></a></h4>
<p>Path to <code>luanext.config.yaml</code> configuration file.</p>
<pre><code class="language-bash">luanext --project ./config/luanext.config.yaml main.luax
</code></pre>
<p>If not specified, LuaNext looks for <code>luanext.config.yaml</code> in the current directory and parent directories.</p>
<h4 id="--out-dir-dir"><a class="header" href="#--out-dir-dir"><code>--out-dir &lt;DIR&gt;</code></a></h4>
<p>Output directory for compiled Lua files.</p>
<pre><code class="language-bash">luanext main.luax --out-dir dist/
</code></pre>
<p>Creates <code>dist/main.lua</code> preserving directory structure.</p>
<h4 id="--out-file-file"><a class="header" href="#--out-file-file"><code>--out-file &lt;FILE&gt;</code></a></h4>
<p>Output file (concatenates all output into a single file).</p>
<pre><code class="language-bash">luanext "src/**/*.luax" --out-file bundle.lua
</code></pre>
<p>Generates a single bundled file with all modules.</p>
<h4 id="--no-emit"><a class="header" href="#--no-emit"><code>--no-emit</code></a></h4>
<p>Type-check only, do not generate output files.</p>
<pre><code class="language-bash">luanext main.luax --no-emit
</code></pre>
<p>Useful for CI/CD type checking without generating output.</p>
<h3 id="target-and-compatibility"><a class="header" href="#target-and-compatibility">Target and Compatibility</a></h3>
<h4 id="--target-version"><a class="header" href="#--target-version"><code>--target &lt;VERSION&gt;</code></a></h4>
<p>Target Lua version: <code>5.1</code>, <code>5.2</code>, <code>5.3</code>, or <code>5.4</code>.</p>
<pre><code class="language-bash">luanext main.luax --target 5.1
luanext main.luax --target 5.4
</code></pre>
<p><strong>Default:</strong> <code>5.4</code></p>
<p>Affects:</p>
<ul>
<li>Integer handling (native in 5.3+, type-checked only in 5.1/5.2)</li>
<li>Bitwise operators (native in 5.3+, library calls in 5.1/5.2)</li>
<li>Standard library compatibility</li>
</ul>
<p>See <a href="../guides/lua-targets.html">Lua Targets</a> for details.</p>
<h3 id="source-maps"><a class="header" href="#source-maps">Source Maps</a></h3>
<h4 id="--source-map"><a class="header" href="#--source-map"><code>--source-map</code></a></h4>
<p>Generate source maps (<code>.lua.map</code> files).</p>
<pre><code class="language-bash">luanext main.luax --source-map
</code></pre>
<p>Creates <code>main.lua</code> and <code>main.lua.map</code> for debugging.</p>
<h4 id="--inline-source-map"><a class="header" href="#--inline-source-map"><code>--inline-source-map</code></a></h4>
<p>Inline source map in output file as a comment.</p>
<pre><code class="language-bash">luanext main.luax --inline-source-map
</code></pre>
<p>Embeds source map directly in <code>main.lua</code>:</p>
<pre><code class="language-lua">-- ...generated code...
--# sourceMappingURL=data:application/json;base64,...
</code></pre>
<h3 id="watch-mode"><a class="header" href="#watch-mode">Watch Mode</a></h3>
<h4 id="-w---watch"><a class="header" href="#-w---watch"><code>-w, --watch</code></a></h4>
<p>Watch input files for changes and recompile automatically.</p>
<pre><code class="language-bash">luanext "src/**/*.luax" --watch --out-dir dist/
</code></pre>
<p>Monitors files and recompiles on changes. Press <code>Ctrl+C</code> to exit.</p>
<p><strong>Features:</strong></p>
<ul>
<li>Incremental compilation (only changed files)</li>
<li>Fast rebuild times</li>
<li>Error recovery (continues watching after errors)</li>
</ul>
<h3 id="project-initialization"><a class="header" href="#project-initialization">Project Initialization</a></h3>
<h4 id="--init"><a class="header" href="#--init"><code>--init</code></a></h4>
<p>Initialize a new LuaNext project.</p>
<pre><code class="language-bash">luanext --init
</code></pre>
<p>Creates:</p>
<ul>
<li><code>luanext.config.yaml</code> — Configuration file</li>
<li><code>main.luax</code> — Sample source file</li>
</ul>
<h3 id="type-checking-options"><a class="header" href="#type-checking-options">Type Checking Options</a></h3>
<h4 id="--no-strict-null-checks"><a class="header" href="#--no-strict-null-checks"><code>--no-strict-null-checks</code></a></h4>
<p>Disable strict null checking (allow nil anywhere).</p>
<pre><code class="language-bash">luanext main.luax --no-strict-null-checks
</code></pre>
<p>By default, LuaNext enforces explicit nil handling. This flag disables that.</p>
<h4 id="--no-implicit-unknown"><a class="header" href="#--no-implicit-unknown"><code>--no-implicit-unknown</code></a></h4>
<p>Disallow implicit <code>unknown</code> types (require explicit type annotations).</p>
<pre><code class="language-bash">luanext main.luax --no-implicit-unknown
</code></pre>
<p>Forces all values to have known types or explicit <code>unknown</code> annotation.</p>
<h4 id="--strict-naming-level"><a class="header" href="#--strict-naming-level"><code>--strict-naming &lt;LEVEL&gt;</code></a></h4>
<p>Strict naming convention enforcement: <code>error</code>, <code>warning</code>, or <code>off</code>.</p>
<pre><code class="language-bash">luanext main.luax --strict-naming error
luanext main.luax --strict-naming warning
</code></pre>
<ul>
<li><code>error</code> — Naming violations are compilation errors</li>
<li><code>warning</code> — Naming violations are warnings</li>
<li><code>off</code> — No naming enforcement (default)</li>
</ul>
<p><strong>Conventions checked:</strong></p>
<ul>
<li>Constants: <code>UPPER_SNAKE_CASE</code></li>
<li>Variables: <code>camelCase</code> or <code>snake_case</code></li>
<li>Types/Interfaces: <code>PascalCase</code></li>
<li>Functions: <code>camelCase</code> or <code>snake_case</code></li>
</ul>
<h3 id="feature-flags"><a class="header" href="#feature-flags">Feature Flags</a></h3>
<h4 id="--enable-decorators"><a class="header" href="#--enable-decorators"><code>--enable-decorators</code></a></h4>
<p>Enable decorator syntax.</p>
<pre><code class="language-bash">luanext main.luax --enable-decorators
</code></pre>
<p>Allows using <code>@decorator</code> annotations on classes and members.</p>
<p><strong>Default:</strong> Enabled (add <code>--no-enable-decorators</code> to disable)</p>
<h3 id="module-system"><a class="header" href="#module-system">Module System</a></h3>
<h4 id="--module-mode-mode"><a class="header" href="#--module-mode-mode"><code>--module-mode &lt;MODE&gt;</code></a></h4>
<p>Module code generation mode: <code>require</code> or <code>bundle</code>.</p>
<pre><code class="language-bash">luanext main.luax --module-mode require
luanext main.luax --module-mode bundle
</code></pre>
<ul>
<li><code>require</code> — Generate separate files with <code>require()</code> calls (default)</li>
<li><code>bundle</code> — Inline all modules into output file</li>
</ul>
<h4 id="--module-paths-paths"><a class="header" href="#--module-paths-paths"><code>--module-paths &lt;PATHS&gt;</code></a></h4>
<p>Module search paths (comma-separated).</p>
<pre><code class="language-bash">luanext main.luax --module-paths "lib/,node_modules/"
</code></pre>
<p>Adds additional directories to module resolution paths.</p>
<h4 id="--enforce-namespace-path"><a class="header" href="#--enforce-namespace-path"><code>--enforce-namespace-path</code></a></h4>
<p>Enforce that namespace declarations match file paths.</p>
<pre><code class="language-bash">luanext main.luax --enforce-namespace-path
</code></pre>
<p>Example: <code>namespace MyApp.Utils</code> in <code>src/MyApp/Utils.luax</code> is valid,
but <code>namespace Other.Namespace</code> would be an error.</p>
<h3 id="output-formatting"><a class="header" href="#output-formatting">Output Formatting</a></h3>
<h4 id="--format-format"><a class="header" href="#--format-format"><code>--format &lt;FORMAT&gt;</code></a></h4>
<p>Output format: <code>readable</code>, <code>compact</code>, or <code>minified</code>.</p>
<pre><code class="language-bash">luanext main.luax --format readable   # Default: formatted with indentation
luanext main.luax --format compact    # Minimal whitespace
luanext main.luax --format minified   # Single line, no whitespace
</code></pre>
<p><strong>Readable:</strong></p>
<pre><code class="language-lua">local function add(a, b)
    return a + b
end
</code></pre>
<p><strong>Compact:</strong></p>
<pre><code class="language-lua">local function add(a, b)
  return a + b
end
</code></pre>
<p><strong>Minified:</strong></p>
<pre><code class="language-lua">local function add(a,b)return a+b end
</code></pre>
<h4 id="--copy-lua-to-output"><a class="header" href="#--copy-lua-to-output"><code>--copy-lua-to-output</code></a></h4>
<p>Copy plain <code>.lua</code> files to output directory.</p>
<pre><code class="language-bash">luanext "src/**/*.luax" --copy-lua-to-output --out-dir dist/
</code></pre>
<p>Copies non-LuaNext <code>.lua</code> files from source to output directory.</p>
<h3 id="optimization"><a class="header" href="#optimization">Optimization</a></h3>
<h4 id="--optimize"><a class="header" href="#--optimize"><code>--optimize</code></a></h4>
<p>Enable aggressive optimizations with whole-program analysis.</p>
<pre><code class="language-bash">luanext main.luax --optimize --out-file optimized.lua
</code></pre>
<p><strong>Enabled optimizations:</strong></p>
<ul>
<li>Constant folding and propagation</li>
<li>Dead code elimination</li>
<li>Function inlining</li>
<li>Loop optimizations</li>
<li>Rich enum optimization</li>
<li>Table preallocation</li>
<li>Tail call optimization</li>
</ul>
<p><strong>Note:</strong> Requires <code>--out-file</code> or single file compilation for whole-program analysis.</p>
<h4 id="--no-optimize"><a class="header" href="#--no-optimize"><code>--no-optimize</code></a></h4>
<p>Disable all optimizations (raw transpilation).</p>
<pre><code class="language-bash">luanext main.luax --no-optimize
</code></pre>
<p>Generates Lua code directly from AST without any optimization passes.</p>
<h4 id="--profile-optimizer"><a class="header" href="#--profile-optimizer"><code>--profile-optimizer</code></a></h4>
<p>Enable optimizer profiling (logs pass timings).</p>
<pre><code class="language-bash">luanext main.luax --optimize --profile-optimizer
</code></pre>
<p>Outputs timing information for each optimization pass:</p>
<pre><code>ConstantFoldingPass: 12.3ms
DeadCodeEliminationPass: 8.7ms
InlineExpansionPass: 15.2ms
...
</code></pre>
<h4 id="--no-parallel-optimization"><a class="header" href="#--no-parallel-optimization"><code>--no-parallel-optimization</code></a></h4>
<p>Disable parallel optimization (for benchmarking).</p>
<pre><code class="language-bash">luanext main.luax --optimize --no-parallel-optimization
</code></pre>
<p>Runs optimization passes sequentially instead of in parallel.</p>
<h4 id="--no-tree-shake"><a class="header" href="#--no-tree-shake"><code>--no-tree-shake</code></a></h4>
<p>Disable tree shaking (for debugging).</p>
<pre><code class="language-bash">luanext main.luax --optimize --no-tree-shake
</code></pre>
<p>Keeps all code, even unreachable functions/exports.</p>
<h4 id="--no-scope-hoist"><a class="header" href="#--no-scope-hoist"><code>--no-scope-hoist</code></a></h4>
<p>Disable scope hoisting (for debugging).</p>
<pre><code class="language-bash">luanext main.luax --optimize --no-scope-hoist
</code></pre>
<p>Preserves module boundaries instead of merging scopes.</p>
<h3 id="caching"><a class="header" href="#caching">Caching</a></h3>
<h4 id="--no-cache"><a class="header" href="#--no-cache"><code>--no-cache</code></a></h4>
<p>Disable incremental compilation cache.</p>
<pre><code class="language-bash">luanext main.luax --no-cache
</code></pre>
<p>Forces full recompilation, ignoring <code>.luanext-cache/</code> directory.</p>
<p><strong>Note:</strong> Cache is stored in <code>.luanext-cache/</code> in the project root.</p>
<h4 id="--force-full-check"><a class="header" href="#--force-full-check"><code>--force-full-check</code></a></h4>
<p>Force full type check (disable incremental type checking).</p>
<pre><code class="language-bash">luanext main.luax --force-full-check
</code></pre>
<p>Re-type-checks all files even if unchanged.</p>
<h3 id="reflection"><a class="header" href="#reflection">Reflection</a></h3>
<h4 id="--reflection-mode"><a class="header" href="#--reflection-mode"><code>--reflection &lt;MODE&gt;</code></a></h4>
<p>Reflection metadata mode: <code>selective</code>, <code>full</code>, or <code>none</code>.</p>
<pre><code class="language-bash">luanext main.luax --reflection selective  # Default
luanext main.luax --reflection full
luanext main.luax --reflection none
</code></pre>
<ul>
<li><code>selective</code> — Include metadata for decorated items only</li>
<li><code>full</code> — Include metadata for all types and functions</li>
<li><code>none</code> — No reflection metadata</li>
</ul>
<p><strong>Metadata includes:</strong></p>
<ul>
<li>Type information</li>
<li>Decorator annotations</li>
<li>Parameter names</li>
<li>Property types</li>
</ul>
<h3 id="diagnostics"><a class="header" href="#diagnostics">Diagnostics</a></h3>
<h4 id="--pretty"><a class="header" href="#--pretty"><code>--pretty</code></a></h4>
<p>Pretty print diagnostics (default: enabled).</p>
<pre><code class="language-bash">luanext main.luax --pretty
</code></pre>
<p><strong>With <code>--pretty</code>:</strong></p>
<pre><code>error[E0001]: Type mismatch
  ┌─ main.luax:5:10
  │
5 │     const x: number = "hello"
  │              ^^^^^^   ^^^^^^^ expected number, found string
  │              │
  │              type annotation
</code></pre>
<p><strong>Without <code>--pretty</code> (<code>--no-pretty</code>):</strong></p>
<pre><code>main.luax:5:10: error[E0001]: Type mismatch: expected number, found string
</code></pre>
<h4 id="--diagnostics"><a class="header" href="#--diagnostics"><code>--diagnostics</code></a></h4>
<p>Show diagnostic error codes in output.</p>
<pre><code class="language-bash">luanext main.luax --diagnostics
</code></pre>
<p>Includes error codes like <code>[E0001]</code>, <code>[E0042]</code> in diagnostic messages.</p>
<h3 id="information"><a class="header" href="#information">Information</a></h3>
<h4 id="--help"><a class="header" href="#--help"><code>--help</code></a></h4>
<p>Display help information.</p>
<pre><code class="language-bash">luanext --help
</code></pre>
<h4 id="--version"><a class="header" href="#--version"><code>--version</code></a></h4>
<p>Display version information.</p>
<pre><code class="language-bash">luanext --version
</code></pre>
<h2 id="exit-codes"><a class="header" href="#exit-codes">Exit Codes</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Code</th><th>Meaning</th></tr>
</thead>
<tbody>
<tr><td><code>0</code></td><td>Success (no errors)</td></tr>
<tr><td><code>1</code></td><td>Compilation error (type errors, syntax errors)</td></tr>
<tr><td><code>2</code></td><td>File not found or I/O error</td></tr>
<tr><td><code>3</code></td><td>Configuration error (invalid config file)</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-file"><a class="header" href="#configuration-file">Configuration File</a></h2>
<p>Instead of command-line options, use <code>luanext.config.yaml</code>:</p>
<pre><code class="language-yaml">compilerOptions:
  target: "5.4"
  outDir: "dist"
  outFile: "bundle.lua"
  sourceMap: true
  inlineSourceMap: false
  noEmit: false
  strictNullChecks: true
  enableDecorators: true
  moduleMode: "require"
  format: "readable"
  optimize: false
  reflection: "selective"
  pretty: true
  copyLuaToOutput: false

include:
  - "src/**/*.luax"
  - "tests/**/*.luax"

exclude:
  - "**/node_modules/**"
  - "**/dist/**"
  - "**/*.test.luax"
</code></pre>
<p>Command-line options override config file values.</p>
<p>See <a href="configuration.html">Configuration Reference</a> for complete options.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="basic-compilation"><a class="header" href="#basic-compilation">Basic Compilation</a></h3>
<pre><code class="language-bash"># Compile single file
luanext main.luax

# Compile to specific directory
luanext main.luax --out-dir build/

# Compile with source maps
luanext main.luax --source-map
</code></pre>
<h3 id="project-compilation"><a class="header" href="#project-compilation">Project Compilation</a></h3>
<pre><code class="language-bash"># Use project configuration
luanext

# Compile entire project
luanext "src/**/*.luax" --out-dir dist/

# Bundle project to single file
luanext "src/**/*.luax" --out-file app.lua
</code></pre>
<h3 id="watch-mode-1"><a class="header" href="#watch-mode-1">Watch Mode</a></h3>
<pre><code class="language-bash"># Watch for changes
luanext "src/**/*.luax" --watch --out-dir dist/

# Watch with optimizations
luanext "src/**/*.luax" --watch --optimize --out-file bundle.lua
</code></pre>
<h3 id="type-checking"><a class="header" href="#type-checking">Type Checking</a></h3>
<pre><code class="language-bash"># Type-check only (no output)
luanext "src/**/*.luax" --no-emit

# Type-check with strict settings
luanext main.luax --no-emit --no-implicit-unknown --strict-naming error
</code></pre>
<h3 id="optimization-1"><a class="header" href="#optimization-1">Optimization</a></h3>
<pre><code class="language-bash"># Optimize single file
luanext main.luax --optimize --out-file optimized.lua

# Optimize project bundle
luanext "src/**/*.luax" --optimize --out-file app.min.lua --format minified

# Profile optimizer performance
luanext main.luax --optimize --profile-optimizer
</code></pre>
<h3 id="cross-lua-version"><a class="header" href="#cross-lua-version">Cross-Lua-Version</a></h3>
<pre><code class="language-bash"># Target Lua 5.1 (LuaJIT compatible)
luanext main.luax --target 5.1 --out-dir dist-5.1/

# Target Lua 5.4 (latest features)
luanext main.luax --target 5.4 --out-dir dist-5.4/
</code></pre>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<h3 id="rust_log"><a class="header" href="#rust_log"><code>RUST_LOG</code></a></h3>
<p>Control logging verbosity.</p>
<pre><code class="language-bash"># Info level (default)
RUST_LOG=info luanext main.luax

# Debug level (detailed logs)
RUST_LOG=debug luanext main.luax

# Trace level (very verbose)
RUST_LOG=trace luanext main.luax

# Silence logs
RUST_LOG=off luanext main.luax
</code></pre>
<h3 id="no_color"><a class="header" href="#no_color"><code>NO_COLOR</code></a></h3>
<p>Disable colored output.</p>
<pre><code class="language-bash">NO_COLOR=1 luanext main.luax
</code></pre>
<h2 id="glob-patterns"><a class="header" href="#glob-patterns">Glob Patterns</a></h2>
<p>LuaNext supports standard glob patterns for file selection:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Pattern</th><th>Matches</th></tr>
</thead>
<tbody>
<tr><td><code>*</code></td><td>Any characters except <code>/</code></td></tr>
<tr><td><code>**</code></td><td>Any characters including <code>/</code> (recursive)</td></tr>
<tr><td><code>?</code></td><td>Single character</td></tr>
<tr><td><code>[abc]</code></td><td>Any character in set</td></tr>
<tr><td><code>{a,b}</code></td><td>Either <code>a</code> or <code>b</code></td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-bash"># All .luax files in src/
luanext "src/*.luax"

# All .luax files in src/ and subdirectories
luanext "src/**/*.luax"

# Only files matching pattern
luanext "src/**/*{Utils,Helper}.luax"

# Multiple patterns
luanext "src/**/*.luax" "lib/**/*.luax"
</code></pre>
<h2 id="tips-and-best-practices"><a class="header" href="#tips-and-best-practices">Tips and Best Practices</a></h2>
<h3 id="use-configuration-files"><a class="header" href="#use-configuration-files">Use Configuration Files</a></h3>
<p>For projects with complex settings, use <code>luanext.config.yaml</code>:</p>
<pre><code class="language-bash"># Automatically uses luanext.config.yaml
luanext

# Or specify config explicitly
luanext --project ./custom-config.yaml
</code></pre>
<h3 id="watch-mode-for-development"><a class="header" href="#watch-mode-for-development">Watch Mode for Development</a></h3>
<p>Use watch mode during development for fast feedback:</p>
<pre><code class="language-bash">luanext "src/**/*.luax" --watch --out-dir dist/
</code></pre>
<h3 id="optimization-for-production"><a class="header" href="#optimization-for-production">Optimization for Production</a></h3>
<p>Enable optimizations for production builds:</p>
<pre><code class="language-bash">luanext "src/**/*.luax" --optimize --out-file app.lua --format minified
</code></pre>
<h3 id="type-check-in-cicd"><a class="header" href="#type-check-in-cicd">Type-Check in CI/CD</a></h3>
<p>Use <code>--no-emit</code> for fast type checking in CI:</p>
<pre><code class="language-bash">luanext "src/**/*.luax" --no-emit --diagnostics
</code></pre>
<h3 id="debug-optimization-issues"><a class="header" href="#debug-optimization-issues">Debug Optimization Issues</a></h3>
<p>If optimizations cause issues, disable specific passes:</p>
<pre><code class="language-bash"># Disable tree shaking
luanext main.luax --optimize --no-tree-shake

# Disable scope hoisting
luanext main.luax --optimize --no-scope-hoist

# Disable all optimizations
luanext main.luax --no-optimize
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="no-input-files-specified"><a class="header" href="#no-input-files-specified">“No input files specified”</a></h3>
<p><strong>Problem:</strong> No files match the pattern or no files provided.</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Check glob pattern matches files
ls src/**/*.luax

# Use quotes around patterns
luanext "src/**/*.luax"
</code></pre>
<h3 id="configuration-file-not-found"><a class="header" href="#configuration-file-not-found">“Configuration file not found”</a></h3>
<p><strong>Problem:</strong> <code>luanext.config.yaml</code> not found.</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Initialize project
luanext --init

# Or specify config path
luanext --project path/to/config.yaml
</code></pre>
<h3 id="compilation-errors"><a class="header" href="#compilation-errors">Compilation Errors</a></h3>
<p><strong>Problem:</strong> Type errors or syntax errors.</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Use pretty diagnostics
luanext main.luax --pretty --diagnostics

# Check specific file
luanext problem-file.luax --no-emit
</code></pre>
<h3 id="cache-issues"><a class="header" href="#cache-issues">Cache Issues</a></h3>
<p><strong>Problem:</strong> Stale cache causing incorrect behavior.</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Clear cache and recompile
rm -rf .luanext-cache/
luanext main.luax

# Or disable cache
luanext main.luax --no-cache
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="configuration.html">Configuration Reference</a> — Config file options</li>
<li><a href="../guides/migrating-from-lua.html">Migrating from Lua</a> — Porting Lua code</li>
<li><a href="../guides/lua-targets.html">Lua Targets</a> — Targeting different Lua versions</li>
</ul>

                </section>

                </div><!-- page-inner -->

            </div><!-- page-wrapper -->

            </div><!-- book-inner -->

            <!-- Version Selector -->
            <nav class="nav-wide-wrapper" aria-label="More">
                <a href="javascript:void(0)" id="menu-bar-wide" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </a>
            </nav>

            <!-- Version selector dropdown -->
            <div id="version-selector" class="version-selector">
                <select id="version-picker" onchange="switchVersion(this.value)" aria-label="Documentation version">
                    <option value="latest">Latest</option>
                </select>
            </div>

        </div><!-- book -->

        <!-- Custom scripts -->
        <script>
            // Version selector functionality
            function switchVersion(version) {
                const base = window.location.origin + '/luanext/';
                if (version === 'latest') {
                    window.location.href = base;
                } else {
                    window.location.href = base + version + '/';
                }
            }

            // Load versions.json and populate selector if it exists
            fetch('/luanext/versions.json')
                .then(response => response.json())
                .then(data => {
                    if (data.versions && data.versions.length > 1) {
                        const selector = document.getElementById('version-picker');
                        data.versions.forEach(v => {
                            if (v.version !== 'latest') {
                                const option = document.createElement('option');
                                option.value = 'v' + v.version;
                                option.textContent = 'v' + v.version;
                                selector.appendChild(option);
                            }
                        });
                    }
                })
                .catch(() => {
                    // versions.json not found (expected during initial setup)
                    // Selector will only show "Latest"
                });
        </script>

        <!-- mdBook scripts and content scripts -->
        <script src="js/clipboard.min.js" type="text/javascript"></script>
        <script src="js/highlight.js" type="text/javascript"></script>
        <script src="js/book.js" type="text/javascript"></script>

        <!-- Custom theme script -->
        <script src="js/custom-theme.js" type="text/javascript"></script>

        <script src="js/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/lunr-en.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/search.js" type="text/javascript" charset="utf-8"></script>

    </body>
</html>
