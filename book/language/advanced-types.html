<!DOCTYPE html>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Fallback to default mdbook template -->
        
        <meta name="robots" content="noindex,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <title>Advanced Types - LuaNext Documentation</title>
        <script>
            var theme = localStorage.getItem("mdbook-theme");
            if (theme === null || theme === undefined) { theme = "light"; }
            var html = document.querySelector("html");
            html.classList.remove("light");
            html.classList.add(theme);
        </script>
        <meta name="description" content="A typed superset of Lua with gradual typing, inspired by TypeScript">
        <link rel="icon" href="favicon.svg">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/custom.css">
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">

    </head>
    <body>
        <!-- Provide the book title to JavaScript -->
        <script>
            window.book = window.book || {};
            window.book.language = "en";
        </script>

        <div id="book" class="book">
            <div class="book-inner">

            <nav role="navigation" aria-label="Table of contents" class="sidebar">
                <ol class="chapter"><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="introduction.html">Introduction</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Language</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/basics.html"><strong aria-hidden="true">1.</strong> Basics</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/control-flow.html"><strong aria-hidden="true">2.</strong> Control Flow</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/functions.html"><strong aria-hidden="true">3.</strong> Functions</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/type-system.html"><strong aria-hidden="true">4.</strong> Type System</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/classes.html"><strong aria-hidden="true">5.</strong> Classes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/interfaces.html"><strong aria-hidden="true">6.</strong> Interfaces</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/enums.html"><strong aria-hidden="true">7.</strong> Enums</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/modules.html"><strong aria-hidden="true">8.</strong> Modules</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/pattern-matching.html"><strong aria-hidden="true">10.</strong> Pattern Matching</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/decorators.html"><strong aria-hidden="true">11.</strong> Decorators</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/advanced-types.html"><strong aria-hidden="true">12.</strong> Advanced Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/operators.html"><strong aria-hidden="true">13.</strong> Operators</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Guides</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/migrating-from-lua.html"><strong aria-hidden="true">14.</strong> Migrating from Lua</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/lua-targets.html"><strong aria-hidden="true">15.</strong> Lua Targets</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/cli.html"><strong aria-hidden="true">16.</strong> CLI</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/configuration.html"><strong aria-hidden="true">17.</strong> Configuration</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/standard-library.html"><strong aria-hidden="true">18.</strong> Standard Library</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/utility-types.html"><strong aria-hidden="true">19.</strong> Utility Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/reflection.html"><strong aria-hidden="true">20.</strong> Reflection API</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/error-codes.html"><strong aria-hidden="true">21.</strong> Error Codes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/grammar.html"><strong aria-hidden="true">22.</strong> Grammar</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/keywords.html"><strong aria-hidden="true">23.</strong> Keywords</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Contributing</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="contributing/setup.html"><strong aria-hidden="true">24.</strong> Getting Started</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">API Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="api/index.html"><strong aria-hidden="true">25.</strong> Rust API Docs</a></span></li></ol>
            </nav>

            <div id="page-wrapper" class="page-wrapper">

                <div class="page-inner">

                <section class="normal" id="main">
                    <h1 id="advanced-types"><a class="header" href="#advanced-types">Advanced Types</a></h1>
<p>LuaNext provides advanced type system features inspired by TypeScript, including conditional types, mapped types, template literal types, type predicates, and more.</p>
<h2 id="conditional-types"><a class="header" href="#conditional-types">Conditional Types</a></h2>
<p>Conditional types select one of two types based on a condition.</p>
<h3 id="syntax"><a class="header" href="#syntax">Syntax</a></h3>
<pre><code class="language-lua">T extends U ? X : Y
</code></pre>
<p>If <code>T</code> extends <code>U</code>, the type resolves to <code>X</code>, otherwise <code>Y</code>.</p>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<h4 id="basic-conditional-type"><a class="header" href="#basic-conditional-type">Basic Conditional Type</a></h4>
<pre><code class="language-lua">type IsString&lt;T&gt; = T extends string ? true : false

type A = IsString&lt;string&gt;  -- true
type B = IsString&lt;number&gt;  -- false
</code></pre>
<h4 id="extracting-return-type"><a class="header" href="#extracting-return-type">Extracting Return Type</a></h4>
<pre><code class="language-lua">type ReturnType&lt;T&gt; = T extends (...args: any) =&gt; infer R ? R : never

type Func = (x: number) =&gt; string
type Result = ReturnType&lt;Func&gt;  -- string
</code></pre>
<h4 id="distributive-conditional-types"><a class="header" href="#distributive-conditional-types">Distributive Conditional Types</a></h4>
<p>Conditional types distribute over unions:</p>
<pre><code class="language-lua">type ToArray&lt;T&gt; = T extends any ? T[] : never

type Result = ToArray&lt;string | number&gt;
-- Expands to: (string extends any ? string[] : never) | (number extends any ? number[] : never)
-- Result: string[] | number[]
</code></pre>
<h4 id="non-nullable-type"><a class="header" href="#non-nullable-type">Non-Nullable Type</a></h4>
<pre><code class="language-lua">type NonNilable&lt;T&gt; = T extends nil ? never : T

type A = NonNilable&lt;string | nil&gt;  -- string
type B = NonNilable&lt;number | nil&gt;  -- number
</code></pre>
<h2 id="mapped-types"><a class="header" href="#mapped-types">Mapped Types</a></h2>
<p>Mapped types transform properties of an existing type.</p>
<h3 id="syntax-1"><a class="header" href="#syntax-1">Syntax</a></h3>
<pre><code class="language-lua">{[K in keyof T]: NewType}
{[K in keyof T]?: NewType}      -- Optional
{readonly [K in keyof T]: NewType}  -- Readonly
</code></pre>
<h3 id="examples-1"><a class="header" href="#examples-1">Examples</a></h3>
<h4 id="basic-mapped-type"><a class="header" href="#basic-mapped-type">Basic Mapped Type</a></h4>
<pre><code class="language-lua">type Partial&lt;T&gt; = {[K in keyof T]?: T[K]}

interface User
    name: string
    age: number
    email: string
end

type PartialUser = Partial&lt;User&gt;
-- Result:
-- {
--     name?: string,
--     age?: number,
--     email?: string
-- }
</code></pre>
<h4 id="readonly-mapped-type"><a class="header" href="#readonly-mapped-type">Readonly Mapped Type</a></h4>
<pre><code class="language-lua">type Readonly&lt;T&gt; = {readonly [K in keyof T]: T[K]}

type ReadonlyUser = Readonly&lt;User&gt;
-- All properties become readonly
</code></pre>
<h4 id="required-mapped-type"><a class="header" href="#required-mapped-type">Required Mapped Type</a></h4>
<pre><code class="language-lua">type Required&lt;T&gt; = {[K in keyof T]-?: T[K]}

interface PartialConfig
    host?: string
    port?: number
end

type Config = Required&lt;PartialConfig&gt;
-- Both properties become required
</code></pre>
<h4 id="adding-and-removing-modifiers"><a class="header" href="#adding-and-removing-modifiers">Adding and Removing Modifiers</a></h4>
<pre><code class="language-lua">-- Add readonly
type AddReadonly&lt;T&gt; = {+readonly [K in keyof T]: T[K]}

-- Remove readonly
type RemoveReadonly&lt;T&gt; = {-readonly [K in keyof T]: T[K]}

-- Add optional
type AddOptional&lt;T&gt; = {[K in keyof T]+?: T[K]}

-- Remove optional (make required)
type RemoveOptional&lt;T&gt; = {[K in keyof T]-?: T[K]}
</code></pre>
<h4 id="record-type"><a class="header" href="#record-type">Record Type</a></h4>
<pre><code class="language-lua">type Record&lt;K extends string | number, T&gt; = {[P in K]: T}

type StringMap = Record&lt;string, number&gt;
-- {[key: string]: number}

type Status = "pending" | "active" | "completed"
type StatusRecord = Record&lt;Status, boolean&gt;
-- {
--     pending: boolean,
--     active: boolean,
--     completed: boolean
-- }
</code></pre>
<h2 id="template-literal-types"><a class="header" href="#template-literal-types">Template Literal Types</a></h2>
<p>Create types from template string patterns.</p>
<h3 id="syntax-2"><a class="header" href="#syntax-2">Syntax</a></h3>
<pre><code class="language-lua">type Pattern = `prefix_${T}_suffix`
</code></pre>
<h3 id="examples-2"><a class="header" href="#examples-2">Examples</a></h3>
<h4 id="basic-template-literal-type"><a class="header" href="#basic-template-literal-type">Basic Template Literal Type</a></h4>
<pre><code class="language-lua">type EventName&lt;T extends string&gt; = `on${T}Changed`

type NameEvent = EventName&lt;"name"&gt;  -- "onNameChanged"
type AgeEvent = EventName&lt;"age"&gt;    -- "onAgeChanged"
</code></pre>
<h4 id="combining-with-unions"><a class="header" href="#combining-with-unions">Combining with Unions</a></h4>
<pre><code class="language-lua">type HTTPVerb = "GET" | "POST" | "PUT" | "DELETE"
type Endpoint = `/${HTTPVerb}`

-- Result: "/GET" | "/POST" | "/PUT" | "/DELETE"
</code></pre>
<h4 id="multiple-interpolations"><a class="header" href="#multiple-interpolations">Multiple Interpolations</a></h4>
<pre><code class="language-lua">type EventHandler&lt;T extends string, U extends string&gt; = `on${T}${U}`

type Handler = EventHandler&lt;"User", "Created"&gt;  -- "onUserCreated"
</code></pre>
<h2 id="type-queries-typeof"><a class="header" href="#type-queries-typeof">Type Queries (typeof)</a></h2>
<p>Extract the type of a value.</p>
<h3 id="syntax-3"><a class="header" href="#syntax-3">Syntax</a></h3>
<pre><code class="language-lua">typeof expression
</code></pre>
<h3 id="examples-3"><a class="header" href="#examples-3">Examples</a></h3>
<pre><code class="language-lua">const config = {
    host = "localhost",
    port = 8080,
    ssl = true
}

type Config = typeof config
-- Result:
-- {
--     host: string,
--     port: number,
--     ssl: boolean
-- }
</code></pre>
<h4 id="with-functions"><a class="header" href="#with-functions">With Functions</a></h4>
<pre><code class="language-lua">function add(a: number, b: number): number
    return a + b
end

type AddType = typeof add
-- (a: number, b: number) =&gt; number
</code></pre>
<h2 id="keyof-type-operator"><a class="header" href="#keyof-type-operator">KeyOf Type Operator</a></h2>
<p>Get union of all property keys.</p>
<h3 id="syntax-4"><a class="header" href="#syntax-4">Syntax</a></h3>
<pre><code class="language-lua">keyof T
</code></pre>
<h3 id="examples-4"><a class="header" href="#examples-4">Examples</a></h3>
<pre><code class="language-lua">interface Point
    x: number
    y: number
    z: number
end

type PointKeys = keyof Point
-- "x" | "y" | "z"
</code></pre>
<h4 id="with-index-signatures"><a class="header" href="#with-index-signatures">With Index Signatures</a></h4>
<pre><code class="language-lua">interface StringMap
    [key: string]: any
end

type Keys = keyof StringMap
-- string
</code></pre>
<h2 id="indexed-access-types"><a class="header" href="#indexed-access-types">Indexed Access Types</a></h2>
<p>Access the type of a property.</p>
<h3 id="syntax-5"><a class="header" href="#syntax-5">Syntax</a></h3>
<pre><code class="language-lua">T[K]
</code></pre>
<h3 id="examples-5"><a class="header" href="#examples-5">Examples</a></h3>
<pre><code class="language-lua">interface User
    name: string
    age: number
    email: string
end

type NameType = User["name"]    -- string
type AgeType = User["age"]      -- number
</code></pre>
<h4 id="with-keyof"><a class="header" href="#with-keyof">With keyof</a></h4>
<pre><code class="language-lua">type PropertyType = User[keyof User]
-- string | number (union of all property types)
</code></pre>
<h2 id="infer-keyword"><a class="header" href="#infer-keyword">Infer Keyword</a></h2>
<p>Extract types within conditional types.</p>
<h3 id="syntax-6"><a class="header" href="#syntax-6">Syntax</a></h3>
<pre><code class="language-lua">T extends Pattern&lt;infer U&gt; ? U : never
</code></pre>
<h3 id="examples-6"><a class="header" href="#examples-6">Examples</a></h3>
<h4 id="inferring-return-type"><a class="header" href="#inferring-return-type">Inferring Return Type</a></h4>
<pre><code class="language-lua">type ReturnType&lt;T&gt; = T extends (...args: any) =&gt; infer R ? R : never

type Func1 = () =&gt; string
type Func2 = () =&gt; number

type R1 = ReturnType&lt;Func1&gt;  -- string
type R2 = ReturnType&lt;Func2&gt;  -- number
</code></pre>
<h4 id="inferring-array-element-type"><a class="header" href="#inferring-array-element-type">Inferring Array Element Type</a></h4>
<pre><code class="language-lua">type ElementType&lt;T&gt; = T extends (infer U)[] ? U : never

type A = ElementType&lt;string[]&gt;  -- string
type B = ElementType&lt;number[]&gt;  -- number
</code></pre>
<h4 id="inferring-function-parameters"><a class="header" href="#inferring-function-parameters">Inferring Function Parameters</a></h4>
<pre><code class="language-lua">type Parameters&lt;T&gt; = T extends (...args: infer P) =&gt; any ? P : never

type Func = (a: string, b: number) =&gt; void
type Params = Parameters&lt;Func&gt;  -- [string, number]
</code></pre>
<h2 id="type-predicates"><a class="header" href="#type-predicates">Type Predicates</a></h2>
<p>Type guards with predicates.</p>
<h3 id="syntax-7"><a class="header" href="#syntax-7">Syntax</a></h3>
<pre><code class="language-lua">parameter is Type
</code></pre>
<h3 id="examples-7"><a class="header" href="#examples-7">Examples</a></h3>
<pre><code class="language-lua">function isString(value: unknown): value is string
    return type(value) == "string"
end

function process(value: string | number): void
    if isString(value) then
        -- value is string here
        print(value:upper())
    else
        -- value is number here
        print(value * 2)
    end
end
</code></pre>
<h4 id="custom-type-guards"><a class="header" href="#custom-type-guards">Custom Type Guards</a></h4>
<pre><code class="language-lua">interface Dog
    bark(): void
end

interface Cat
    meow(): void
end

function isDog(animal: Dog | Cat): animal is Dog
    return (animal as any).bark ~= nil
end

function handleAnimal(animal: Dog | Cat): void
    if isDog(animal) then
        animal:bark()
    else
        animal:meow()
    end
end
</code></pre>
<h2 id="variadic-types"><a class="header" href="#variadic-types">Variadic Types</a></h2>
<p>Handle variable-length return types.</p>
<h3 id="syntax-8"><a class="header" href="#syntax-8">Syntax</a></h3>
<pre><code class="language-lua">...T[]
</code></pre>
<h3 id="examples-8"><a class="header" href="#examples-8">Examples</a></h3>
<pre><code class="language-lua">function tuple&lt;T...&gt;(...args: T...): T...
    return ...
end

const [a, b, c] = tuple(1, "hello", true)
-- a: number, b: string, c: boolean
</code></pre>
<h2 id="utility-types"><a class="header" href="#utility-types">Utility Types</a></h2>
<p>LuaNext provides built-in utility types:</p>
<h3 id="partial"><a class="header" href="#partial">Partial<t></t></a></h3>
<p>Make all properties optional:</p>
<pre><code class="language-lua">type Partial&lt;T&gt; = {[K in keyof T]?: T[K]}
</code></pre>
<h3 id="required"><a class="header" href="#required">Required<t></t></a></h3>
<p>Make all properties required:</p>
<pre><code class="language-lua">type Required&lt;T&gt; = {[K in keyof T]-?: T[K]}
</code></pre>
<h3 id="readonly"><a class="header" href="#readonly">Readonly<t></t></a></h3>
<p>Make all properties readonly:</p>
<pre><code class="language-lua">type Readonly&lt;T&gt; = {readonly [K in keyof T]: T[K]}
</code></pre>
<h3 id="recordk-t"><a class="header" href="#recordk-t">Record&lt;K, T&gt;</a></h3>
<p>Create object type with keys K and values T:</p>
<pre><code class="language-lua">type Record&lt;K extends string | number, T&gt; = {[P in K]: T}
</code></pre>
<h3 id="pickt-k"><a class="header" href="#pickt-k">Pick&lt;T, K&gt;</a></h3>
<p>Pick subset of properties:</p>
<pre><code class="language-lua">type Pick&lt;T, K extends keyof T&gt; = {[P in K]: T[P]}

interface User
    id: string
    name: string
    email: string
    age: number
end

type UserPreview = Pick&lt;User, "id" | "name"&gt;
-- {id: string, name: string}
</code></pre>
<h3 id="omitt-k"><a class="header" href="#omitt-k">Omit&lt;T, K&gt;</a></h3>
<p>Omit properties:</p>
<pre><code class="language-lua">type Omit&lt;T, K extends keyof T&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;

type UserWithoutEmail = Omit&lt;User, "email"&gt;
-- {id: string, name: string, age: number}
</code></pre>
<h3 id="excludet-u"><a class="header" href="#excludet-u">Exclude&lt;T, U&gt;</a></h3>
<p>Exclude types from union:</p>
<pre><code class="language-lua">type Exclude&lt;T, U&gt; = T extends U ? never : T

type A = Exclude&lt;"a" | "b" | "c", "a"&gt;  -- "b" | "c"
</code></pre>
<h3 id="extractt-u"><a class="header" href="#extractt-u">Extract&lt;T, U&gt;</a></h3>
<p>Extract types from union:</p>
<pre><code class="language-lua">type Extract&lt;T, U&gt; = T extends U ? T : never

type A = Extract&lt;"a" | "b" | "c", "a" | "d"&gt;  -- "a"
</code></pre>
<h3 id="nonnilable"><a class="header" href="#nonnilable">NonNilable<t></t></a></h3>
<p>Remove nil from type:</p>
<pre><code class="language-lua">type NonNilable&lt;T&gt; = T extends nil ? never : T

type A = NonNilable&lt;string | nil&gt;  -- string
</code></pre>
<h3 id="nilable"><a class="header" href="#nilable">Nilable<t></t></a></h3>
<p>Add nil to type:</p>
<pre><code class="language-lua">type Nilable&lt;T&gt; = T | nil
</code></pre>
<h3 id="returntype"><a class="header" href="#returntype">ReturnType<t></t></a></h3>
<p>Extract function return type:</p>
<pre><code class="language-lua">type ReturnType&lt;T&gt; = T extends (...args: any) =&gt; infer R ? R : never
</code></pre>
<h3 id="parameters"><a class="header" href="#parameters">Parameters<t></t></a></h3>
<p>Extract function parameter types:</p>
<pre><code class="language-lua">type Parameters&lt;T&gt; = T extends (...args: infer P) =&gt; any ? P : never
</code></pre>
<h2 id="complex-type-transformations"><a class="header" href="#complex-type-transformations">Complex Type Transformations</a></h2>
<h3 id="flatten-object-type"><a class="header" href="#flatten-object-type">Flatten Object Type</a></h3>
<pre><code class="language-lua">type Flatten&lt;T&gt; = T extends object ? {[K in keyof T]: T[K]} : T
</code></pre>
<h3 id="deep-partial"><a class="header" href="#deep-partial">Deep Partial</a></h3>
<pre><code class="language-lua">type DeepPartial&lt;T&gt; = {
    [K in keyof T]?: T[K] extends object ? DeepPartial&lt;T[K]&gt; : T[K]
}
</code></pre>
<h3 id="deep-readonly"><a class="header" href="#deep-readonly">Deep Readonly</a></h3>
<pre><code class="language-lua">type DeepReadonly&lt;T&gt; = {
    readonly [K in keyof T]: T[K] extends object ? DeepReadonly&lt;T[K]&gt; : T[K]
}
</code></pre>
<h3 id="mutable-remove-readonly"><a class="header" href="#mutable-remove-readonly">Mutable (Remove Readonly)</a></h3>
<pre><code class="language-lua">type Mutable&lt;T&gt; = {
    -readonly [K in keyof T]: T[K]
}
</code></pre>
<h2 id="type-constraints"><a class="header" href="#type-constraints">Type Constraints</a></h2>
<p>Constrain type parameters:</p>
<pre><code class="language-lua">type Lengthwise = {length: number}

function logLength&lt;T extends Lengthwise&gt;(arg: T): void
    print(arg.length)
end

logLength({length = 10})      -- ✅ OK
logLength([1, 2, 3])          -- ✅ OK (arrays have length)
-- logLength(42)              -- ❌ Error: number doesn't have length
</code></pre>
<h2 id="details"><a class="header" href="#details">Details</a></h2>
<h3 id="conditional-type-inference"><a class="header" href="#conditional-type-inference">Conditional Type Inference</a></h3>
<p>When using <code>infer</code>, the inferred type is captured and can be used in the true branch:</p>
<pre><code class="language-lua">type UnpackArray&lt;T&gt; = T extends (infer U)[] ? U : T

type A = UnpackArray&lt;string[]&gt;  -- string
type B = UnpackArray&lt;number&gt;    -- number (fallback)
</code></pre>
<h3 id="mapped-type-modifiers"><a class="header" href="#mapped-type-modifiers">Mapped Type Modifiers</a></h3>
<ul>
<li><code>+?</code> or <code>?</code> — Make optional</li>
<li><code>-?</code> — Make required</li>
<li><code>+readonly</code> or <code>readonly</code> — Make readonly</li>
<li><code>-readonly</code> — Remove readonly</li>
</ul>
<h3 id="template-literal-type-inference"><a class="header" href="#template-literal-type-inference">Template Literal Type Inference</a></h3>
<p>Template literal types support inference:</p>
<pre><code class="language-lua">type ExtractVersion&lt;T&gt; = T extends `v${infer N}` ? N : never

type A = ExtractVersion&lt;"v1.0.0"&gt;  -- "1.0.0"
</code></pre>
<h3 id="distributive-conditional-types-1"><a class="header" href="#distributive-conditional-types-1">Distributive Conditional Types</a></h3>
<p>Conditional types distribute over unions automatically:</p>
<pre><code class="language-lua">type ToArray&lt;T&gt; = T extends any ? T[] : never

type Result = ToArray&lt;string | number&gt;
-- Distributes to: ToArray&lt;string&gt; | ToArray&lt;number&gt;
-- Result: string[] | number[]
</code></pre>
<p>Wrap in <code>[]</code> to prevent distribution:</p>
<pre><code class="language-lua">type ToArray&lt;T&gt; = [T] extends [any] ? T[] : never

type Result = ToArray&lt;string | number&gt;
-- Result: (string | number)[]
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="type-system.html">Type System</a> — Basic type system features</li>
<li><a href="interfaces.html">Interfaces</a> — Object type definitions</li>
<li><a href="type-system.html#generics">Generics</a> — Generic types</li>
<li><a href="../reference/utility-types.html">Utility Types</a> — Complete utility type reference</li>
</ul>

                </section>

                </div><!-- page-inner -->

            </div><!-- page-wrapper -->

            </div><!-- book-inner -->

            <!-- Version Selector -->
            <nav class="nav-wide-wrapper" aria-label="More">
                <a href="javascript:void(0)" id="menu-bar-wide" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </a>
            </nav>

            <!-- Version selector dropdown -->
            <div id="version-selector" class="version-selector">
                <select id="version-picker" onchange="switchVersion(this.value)" aria-label="Documentation version">
                    <option value="latest">Latest</option>
                </select>
            </div>

        </div><!-- book -->

        <!-- Custom scripts -->
        <script>
            // Version selector functionality
            function switchVersion(version) {
                const base = window.location.origin + '/luanext/';
                if (version === 'latest') {
                    window.location.href = base;
                } else {
                    window.location.href = base + version + '/';
                }
            }

            // Load versions.json and populate selector if it exists
            fetch('/luanext/versions.json')
                .then(response => response.json())
                .then(data => {
                    if (data.versions && data.versions.length > 1) {
                        const selector = document.getElementById('version-picker');
                        data.versions.forEach(v => {
                            if (v.version !== 'latest') {
                                const option = document.createElement('option');
                                option.value = 'v' + v.version;
                                option.textContent = 'v' + v.version;
                                selector.appendChild(option);
                            }
                        });
                    }
                })
                .catch(() => {
                    // versions.json not found (expected during initial setup)
                    // Selector will only show "Latest"
                });
        </script>

        <!-- mdBook scripts and content scripts -->
        <script src="js/clipboard.min.js" type="text/javascript"></script>
        <script src="js/highlight.js" type="text/javascript"></script>
        <script src="js/book.js" type="text/javascript"></script>

        <!-- Custom theme script -->
        <script src="js/custom-theme.js" type="text/javascript"></script>

        <script src="js/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/lunr-en.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/search.js" type="text/javascript" charset="utf-8"></script>

    </body>
</html>
