<!DOCTYPE html>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Fallback to default mdbook template -->
        
        <meta name="robots" content="noindex,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <title>Classes - LuaNext Documentation</title>
        <script>
            var theme = localStorage.getItem("mdbook-theme");
            if (theme === null || theme === undefined) { theme = "light"; }
            var html = document.querySelector("html");
            html.classList.remove("light");
            html.classList.add(theme);
        </script>
        <meta name="description" content="A typed superset of Lua with gradual typing, inspired by TypeScript">
        <link rel="icon" href="favicon.svg">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/custom.css">
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">

    </head>
    <body>
        <!-- Provide the book title to JavaScript -->
        <script>
            window.book = window.book || {};
            window.book.language = "en";
        </script>

        <div id="book" class="book">
            <div class="book-inner">

            <nav role="navigation" aria-label="Table of contents" class="sidebar">
                <ol class="chapter"><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="introduction.html">Introduction</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Language</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/basics.html"><strong aria-hidden="true">1.</strong> Basics</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/control-flow.html"><strong aria-hidden="true">2.</strong> Control Flow</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/functions.html"><strong aria-hidden="true">3.</strong> Functions</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/type-system.html"><strong aria-hidden="true">4.</strong> Type System</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/classes.html"><strong aria-hidden="true">5.</strong> Classes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/interfaces.html"><strong aria-hidden="true">6.</strong> Interfaces</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/enums.html"><strong aria-hidden="true">7.</strong> Enums</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/modules.html"><strong aria-hidden="true">8.</strong> Modules</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/pattern-matching.html"><strong aria-hidden="true">10.</strong> Pattern Matching</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/decorators.html"><strong aria-hidden="true">11.</strong> Decorators</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/advanced-types.html"><strong aria-hidden="true">12.</strong> Advanced Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/operators.html"><strong aria-hidden="true">13.</strong> Operators</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Guides</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/migrating-from-lua.html"><strong aria-hidden="true">14.</strong> Migrating from Lua</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/lua-targets.html"><strong aria-hidden="true">15.</strong> Lua Targets</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/cli.html"><strong aria-hidden="true">16.</strong> CLI</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/configuration.html"><strong aria-hidden="true">17.</strong> Configuration</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/standard-library.html"><strong aria-hidden="true">18.</strong> Standard Library</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/utility-types.html"><strong aria-hidden="true">19.</strong> Utility Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/reflection.html"><strong aria-hidden="true">20.</strong> Reflection API</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/error-codes.html"><strong aria-hidden="true">21.</strong> Error Codes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/grammar.html"><strong aria-hidden="true">22.</strong> Grammar</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/keywords.html"><strong aria-hidden="true">23.</strong> Keywords</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Contributing</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="contributing/setup.html"><strong aria-hidden="true">24.</strong> Getting Started</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">API Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="api/index.html"><strong aria-hidden="true">25.</strong> Rust API Docs</a></span></li></ol>
            </nav>

            <div id="page-wrapper" class="page-wrapper">

                <div class="page-inner">

                <section class="normal" id="main">
                    <h1 id="classes"><a class="header" href="#classes">Classes</a></h1>
<p>LuaNext provides object-oriented programming features through classes with full type safety. Classes support inheritance, interfaces, access modifiers, operator overloading, and more.</p>
<h2 id="syntax"><a class="header" href="#syntax">Syntax</a></h2>
<pre><code class="language-lua">[abstract | final] class ClassName[&lt;TypeParams&gt;][(ConstructorParams)] [extends ParentClass] [implements Interface1, Interface2]
    -- Properties
    [access] [static] [readonly] propertyName: Type [= initializer]

    -- Constructor
    constructor(parameters)
        -- initialization
    end

    -- Methods
    [access] [static] [abstract | final] [override] function methodName(parameters): ReturnType
        -- body
    end

    -- Getters and Setters
    [access] [static] get propertyName(): Type
        -- body
    end

    [access] [static] set propertyName(value: Type)
        -- body
    end

    -- Operator Overloading
    operator [+|-|*|/|etc](parameters): ReturnType
        -- body
    end
end
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="basic-class"><a class="header" href="#basic-class">Basic Class</a></h3>
<pre><code class="language-lua">class Person
    name: string
    age: number

    constructor(name: string, age: number)
        self.name = name
        self.age = age
    end

    function greet(): string
        return `Hello, I'm ${self.name} and I'm ${self.age} years old.`
    end
end

const alice = Person.new("Alice", 30)
print(alice:greet())  -- Hello, I'm Alice and I'm 30 years old.
</code></pre>
<p>Compiles to:</p>
<pre><code class="language-lua">local Person = {}
Person.__index = Person

function Person.new(name, age)
    local self = setmetatable({}, Person)
    self.name = name
    self.age = age
    return self
end

function Person:greet()
    return "Hello, I'm " .. tostring(self.name) .. " and I'm " .. tostring(self.age) .. " years old."
end

local alice = Person.new("Alice", 30)
print(alice:greet())
</code></pre>
<h3 id="primary-constructor"><a class="header" href="#primary-constructor">Primary Constructor</a></h3>
<p>Primary constructors provide a compact syntax for declaring properties:</p>
<pre><code class="language-lua">class Point(public x: number, public y: number)
    function distance(): number
        return math.sqrt(self.x * self.x + self.y * self.y)
    end
end

const p = Point.new(3, 4)
print(p:distance())  -- 5.0
</code></pre>
<p>Compiles to:</p>
<pre><code class="language-lua">local Point = {}
Point.__index = Point

function Point.new(x, y)
    local self = setmetatable({}, Point)
    self.x = x
    self.y = y
    return self
end

function Point:distance()
    return math.sqrt(self.x * self.x + self.y * self.y)
end

local p = Point.new(3, 4)
print(p:distance())
</code></pre>
<h3 id="access-modifiers"><a class="header" href="#access-modifiers">Access Modifiers</a></h3>
<p>LuaNext supports three access modifiers:</p>
<ul>
<li><code>public</code> — Accessible everywhere (default)</li>
<li><code>private</code> — Accessible only within the class</li>
<li><code>protected</code> — Accessible within the class and subclasses</li>
</ul>
<pre><code class="language-lua">class BankAccount(private balance: number)
    public function deposit(amount: number): void
        self.balance = self.balance + amount
    end

    public function getBalance(): number
        return self.balance
    end

    private function validateAmount(amount: number): boolean
        return amount &gt; 0
    end
end

const account = BankAccount.new(100)
account:deposit(50)
print(account:getBalance())  -- 150

-- Error: Cannot access private member
-- print(account.balance)  -- ❌ Type error
</code></pre>
<h3 id="static-members"><a class="header" href="#static-members">Static Members</a></h3>
<p>Static members belong to the class itself, not instances:</p>
<pre><code class="language-lua">class MathUtils
    static PI: number = 3.14159

    static function square(x: number): number
        return x * x
    end

    static function circleArea(radius: number): number
        return MathUtils.PI * radius * radius
    end
end

print(MathUtils.square(5))          -- 25
print(MathUtils.circleArea(10))     -- 314.159
</code></pre>
<h3 id="readonly-properties"><a class="header" href="#readonly-properties">Readonly Properties</a></h3>
<p>Readonly properties can only be assigned in the constructor:</p>
<pre><code class="language-lua">class User(public readonly id: string, public name: string)
    constructor(id: string, name: string)
        self.id = id
        self.name = name
    end

    function rename(newName: string): void
        self.name = newName  -- ✅ OK

        -- Error: Cannot assign to readonly property
        -- self.id = "new-id"  -- ❌ Type error
    end
end
</code></pre>
<h3 id="getters-and-setters"><a class="header" href="#getters-and-setters">Getters and Setters</a></h3>
<p>Computed properties with custom logic:</p>
<pre><code class="language-lua">class Temperature
    private celsius: number

    constructor(celsius: number)
        self.celsius = celsius
    end

    get fahrenheit(): number
        return self.celsius * 9 / 5 + 32
    end

    set fahrenheit(value: number)
        self.celsius = (value - 32) * 5 / 9
    end
end

const temp = Temperature.new(0)
print(temp.fahrenheit)  -- 32
temp.fahrenheit = 100
print(temp.celsius)     -- 37.777...
</code></pre>
<h3 id="inheritance"><a class="header" href="#inheritance">Inheritance</a></h3>
<p>Classes can extend other classes:</p>
<pre><code class="language-lua">class Animal(public name: string)
    function speak(): string
        return `${self.name} makes a sound`
    end
end

class Dog extends Animal(name)
    private breed: string

    constructor(name: string, breed: string)
        super(name)  -- Call parent constructor
        self.breed = breed
    end

    override function speak(): string
        return `${self.name} barks`
    end

    function getBreed(): string
        return self.breed
    end
end

const dog = Dog.new("Rex", "Labrador")
print(dog:speak())      -- Rex barks
print(dog:getBreed())   -- Labrador
</code></pre>
<h3 id="abstract-classes"><a class="header" href="#abstract-classes">Abstract Classes</a></h3>
<p>Abstract classes cannot be instantiated directly:</p>
<pre><code class="language-lua">abstract class Shape
    abstract function area(): number
    abstract function perimeter(): number

    function describe(): string
        return `Area: ${self:area()}, Perimeter: ${self:perimeter()}`
    end
end

class Circle extends Shape(private radius: number)
    override function area(): number
        return 3.14159 * self.radius * self.radius
    end

    override function perimeter(): number
        return 2 * 3.14159 * self.radius
    end
end

-- Error: Cannot instantiate abstract class
-- const shape = Shape.new()  -- ❌ Type error

const circle = Circle.new(5)
print(circle:describe())  -- Area: 78.53975, Perimeter: 31.4159
</code></pre>
<h3 id="final-classes-and-methods"><a class="header" href="#final-classes-and-methods">Final Classes and Methods</a></h3>
<p>Final classes cannot be extended, final methods cannot be overridden:</p>
<pre><code class="language-lua">final class String
    -- Cannot be extended
end

class Base
    final function important(): void
        print("Important logic")
    end
end

class Derived extends Base
    -- Error: Cannot override final method
    -- override function important(): void  -- ❌ Type error
    --     print("Modified")
    -- end
end
</code></pre>
<h3 id="implementing-interfaces"><a class="header" href="#implementing-interfaces">Implementing Interfaces</a></h3>
<p>Classes can implement one or more interfaces:</p>
<pre><code class="language-lua">interface Serializable
    function serialize(): string
end

interface Comparable&lt;T&gt;
    function compareTo(other: T): number
end

class User implements Serializable, Comparable&lt;User&gt;
    name: string
    age: number

    constructor(name: string, age: number)
        self.name = name
        self.age = age
    end

    function serialize(): string
        return `{"name":"${self.name}","age":${self.age}}`
    end

    function compareTo(other: User): number
        return self.age - other.age
    end
end
</code></pre>
<h3 id="operator-overloading"><a class="header" href="#operator-overloading">Operator Overloading</a></h3>
<p>LuaNext supports overloading 24 operators:</p>
<p><strong>Arithmetic:</strong> <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>^</code>, <code>//</code> (floor divide)</p>
<p><strong>Comparison:</strong> <code>==</code>, <code>~=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></p>
<p><strong>Bitwise:</strong> <code>&amp;</code>, <code>|</code>, <code>~</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;</code></p>
<p><strong>Special:</strong> <code>..</code> (concat), <code>#</code> (length), <code>[]</code> (index), <code>[]=</code> (newindex), <code>()</code> (call)</p>
<p><strong>Unary:</strong> <code>-</code> (negate)</p>
<pre><code class="language-lua">class Vector(public x: number, public y: number)
    operator +(other: Vector): Vector
        return Vector.new(self.x + other.x, self.y + other.y)
    end

    operator *(scalar: number): Vector
        return Vector.new(self.x * scalar, self.y * scalar)
    end

    operator ==(other: Vector): boolean
        return self.x == other.x and self.y == other.y
    end

    operator #(): number
        return math.sqrt(self.x * self.x + self.y * self.y)
    end

    operator ...(other: Vector): string
        return `(${self.x}, ${self.y}) + (${other.x}, ${other.y})`
    end
end

const v1 = Vector.new(1, 2)
const v2 = Vector.new(3, 4)
const v3 = v1 + v2              -- Vector(4, 6)
const v4 = v1 * 2               -- Vector(2, 4)
const equal = v1 == v2          -- false
const length = #v1              -- 2.236...
const str = v1 .. v2            -- "(1, 2) + (3, 4)"
</code></pre>
<h3 id="generics"><a class="header" href="#generics">Generics</a></h3>
<p>Classes can be generic over type parameters:</p>
<pre><code class="language-lua">class Box&lt;T&gt;
    private value: T

    constructor(value: T)
        self.value = value
    end

    function get(): T
        return self.value
    end

    function set(value: T): void
        self.value = value
    end
end

const numberBox = Box&lt;number&gt;.new(42)
const stringBox = Box&lt;string&gt;.new("hello")

print(numberBox:get())  -- 42
print(stringBox:get())  -- hello
</code></pre>
<h2 id="details"><a class="header" href="#details">Details</a></h2>
<h3 id="constructor-behavior"><a class="header" href="#constructor-behavior">Constructor Behavior</a></h3>
<ul>
<li>Classes have an implicit <code>new</code> static method that creates instances</li>
<li>The <code>constructor</code> method is called after the instance is created</li>
<li>Primary constructor parameters automatically become properties</li>
<li>Parent constructors must be called with <code>super()</code> in derived classes</li>
</ul>
<h3 id="access-modifier-enforcement"><a class="header" href="#access-modifier-enforcement">Access Modifier Enforcement</a></h3>
<p>Access modifiers are enforced at compile time:</p>
<ul>
<li><code>private</code> members are not accessible outside the class definition</li>
<li><code>protected</code> members are accessible in derived classes</li>
<li><code>public</code> members are accessible everywhere</li>
</ul>
<p>At runtime, all members are public (Lua limitation), but the type checker prevents incorrect access.</p>
<h3 id="method-resolution"><a class="header" href="#method-resolution">Method Resolution</a></h3>
<ul>
<li>Methods are stored in the class’s metatable (<code>__index</code>)</li>
<li>Static methods are stored directly on the class table</li>
<li>Method calls use <code>:</code> syntax (<code>obj:method()</code>) for automatic <code>self</code> passing</li>
</ul>
<h3 id="operator-overloading-mapping"><a class="header" href="#operator-overloading-mapping">Operator Overloading Mapping</a></h3>
<p>LuaNext operators map to Lua metamethods:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>LuaNext</th><th>Lua Metamethod</th></tr>
</thead>
<tbody>
<tr><td><code>+</code></td><td><code>__add</code></td></tr>
<tr><td><code>-</code></td><td><code>__sub</code></td></tr>
<tr><td><code>*</code></td><td><code>__mul</code></td></tr>
<tr><td><code>/</code></td><td><code>__div</code></td></tr>
<tr><td><code>%</code></td><td><code>__mod</code></td></tr>
<tr><td><code>^</code></td><td><code>__pow</code></td></tr>
<tr><td><code>//</code></td><td><code>__idiv</code></td></tr>
<tr><td><code>==</code></td><td><code>__eq</code></td></tr>
<tr><td><code>&lt;</code></td><td><code>__lt</code></td></tr>
<tr><td><code>&lt;=</code></td><td><code>__le</code></td></tr>
<tr><td><code>&amp;</code></td><td><code>__band</code></td></tr>
<tr><td>`</td><td>`</td></tr>
<tr><td><code>~</code></td><td><code>__bxor</code></td></tr>
<tr><td><code>&lt;&lt;</code></td><td><code>__shl</code></td></tr>
<tr><td><code>&gt;&gt;</code></td><td><code>__shr</code></td></tr>
<tr><td><code>..</code></td><td><code>__concat</code></td></tr>
<tr><td><code>#</code></td><td><code>__len</code></td></tr>
<tr><td><code>[]</code></td><td><code>__index</code></td></tr>
<tr><td><code>[]=</code></td><td><code>__newindex</code></td></tr>
<tr><td><code>()</code></td><td><code>__call</code></td></tr>
<tr><td><code>-</code> (unary)</td><td><code>__unm</code></td></tr>
</tbody>
</table>
</div>
<h3 id="abstract-class-checks"><a class="header" href="#abstract-class-checks">Abstract Class Checks</a></h3>
<p>Abstract classes and methods are checked at compile time:</p>
<ul>
<li>Cannot instantiate abstract classes</li>
<li>Must implement all abstract methods in concrete subclasses</li>
<li>Abstract methods cannot have bodies</li>
</ul>
<h3 id="multiple-inheritance"><a class="header" href="#multiple-inheritance">Multiple Inheritance</a></h3>
<p>LuaNext does not support multiple inheritance (extending multiple classes), but supports implementing multiple interfaces.</p>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="interfaces.html">Interfaces</a> — Defining contracts for classes</li>
<li><a href="enums.html">Enums</a> — Rich enums with fields and methods</li>
<li><a href="type-system.html">Type System</a> — Generics and constraints</li>
<li><a href="decorators.html">Decorators</a> — Annotating classes and members</li>
</ul>

                </section>

                </div><!-- page-inner -->

            </div><!-- page-wrapper -->

            </div><!-- book-inner -->

            <!-- Version Selector -->
            <nav class="nav-wide-wrapper" aria-label="More">
                <a href="javascript:void(0)" id="menu-bar-wide" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </a>
            </nav>

            <!-- Version selector dropdown -->
            <div id="version-selector" class="version-selector">
                <select id="version-picker" onchange="switchVersion(this.value)" aria-label="Documentation version">
                    <option value="latest">Latest</option>
                </select>
            </div>

        </div><!-- book -->

        <!-- Custom scripts -->
        <script>
            // Version selector functionality
            function switchVersion(version) {
                const base = window.location.origin + '/luanext/';
                if (version === 'latest') {
                    window.location.href = base;
                } else {
                    window.location.href = base + version + '/';
                }
            }

            // Load versions.json and populate selector if it exists
            fetch('/luanext/versions.json')
                .then(response => response.json())
                .then(data => {
                    if (data.versions && data.versions.length > 1) {
                        const selector = document.getElementById('version-picker');
                        data.versions.forEach(v => {
                            if (v.version !== 'latest') {
                                const option = document.createElement('option');
                                option.value = 'v' + v.version;
                                option.textContent = 'v' + v.version;
                                selector.appendChild(option);
                            }
                        });
                    }
                })
                .catch(() => {
                    // versions.json not found (expected during initial setup)
                    // Selector will only show "Latest"
                });
        </script>

        <!-- mdBook scripts and content scripts -->
        <script src="js/clipboard.min.js" type="text/javascript"></script>
        <script src="js/highlight.js" type="text/javascript"></script>
        <script src="js/book.js" type="text/javascript"></script>

        <!-- Custom theme script -->
        <script src="js/custom-theme.js" type="text/javascript"></script>

        <script src="js/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/lunr-en.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/search.js" type="text/javascript" charset="utf-8"></script>

    </body>
</html>
