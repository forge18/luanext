<!DOCTYPE html>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Fallback to default mdbook template -->
        
        <meta name="robots" content="noindex,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <title>Utility Types - LuaNext Documentation</title>
        <script>
            var theme = localStorage.getItem("mdbook-theme");
            if (theme === null || theme === undefined) { theme = "light"; }
            var html = document.querySelector("html");
            html.classList.remove("light");
            html.classList.add(theme);
        </script>
        <meta name="description" content="A typed superset of Lua with gradual typing, inspired by TypeScript">
        <link rel="icon" href="favicon.svg">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/custom.css">
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">

    </head>
    <body>
        <!-- Provide the book title to JavaScript -->
        <script>
            window.book = window.book || {};
            window.book.language = "en";
        </script>

        <div id="book" class="book">
            <div class="book-inner">

            <nav role="navigation" aria-label="Table of contents" class="sidebar">
                <ol class="chapter"><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="introduction.html">Introduction</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Language</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/basics.html"><strong aria-hidden="true">1.</strong> Basics</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/control-flow.html"><strong aria-hidden="true">2.</strong> Control Flow</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/functions.html"><strong aria-hidden="true">3.</strong> Functions</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/type-system.html"><strong aria-hidden="true">4.</strong> Type System</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/classes.html"><strong aria-hidden="true">5.</strong> Classes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/interfaces.html"><strong aria-hidden="true">6.</strong> Interfaces</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/enums.html"><strong aria-hidden="true">7.</strong> Enums</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/modules.html"><strong aria-hidden="true">8.</strong> Modules</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/pattern-matching.html"><strong aria-hidden="true">10.</strong> Pattern Matching</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/decorators.html"><strong aria-hidden="true">11.</strong> Decorators</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/advanced-types.html"><strong aria-hidden="true">12.</strong> Advanced Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="language/operators.html"><strong aria-hidden="true">13.</strong> Operators</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Guides</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/migrating-from-lua.html"><strong aria-hidden="true">14.</strong> Migrating from Lua</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="guides/lua-targets.html"><strong aria-hidden="true">15.</strong> Lua Targets</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/cli.html"><strong aria-hidden="true">16.</strong> CLI</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/configuration.html"><strong aria-hidden="true">17.</strong> Configuration</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/standard-library.html"><strong aria-hidden="true">18.</strong> Standard Library</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/utility-types.html"><strong aria-hidden="true">19.</strong> Utility Types</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/reflection.html"><strong aria-hidden="true">20.</strong> Reflection API</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/error-codes.html"><strong aria-hidden="true">21.</strong> Error Codes</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/grammar.html"><strong aria-hidden="true">22.</strong> Grammar</a></span></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="reference/keywords.html"><strong aria-hidden="true">23.</strong> Keywords</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">Contributing</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="contributing/setup.html"><strong aria-hidden="true">24.</strong> Getting Started</a></span></li><li class="chapter-item expanded "><li class="spacer"></li></li><li class="chapter-item expanded "><li class="part-title">API Reference</li></li><li class="chapter-item expanded "><span class="chapter-link-wrapper"><a href="api/index.html"><strong aria-hidden="true">25.</strong> Rust API Docs</a></span></li></ol>
            </nav>

            <div id="page-wrapper" class="page-wrapper">

                <div class="page-inner">

                <section class="normal" id="main">
                    <h1 id="utility-types-reference"><a class="header" href="#utility-types-reference">Utility Types Reference</a></h1>
<p>Complete reference for LuaNext’s built-in utility types. These types transform and manipulate other types.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>LuaNext provides 12 built-in utility types inspired by TypeScript:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Utility Type</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>Partial&lt;T&gt;</code></td><td>Make all properties optional</td></tr>
<tr><td><code>Required&lt;T&gt;</code></td><td>Make all properties required</td></tr>
<tr><td><code>Readonly&lt;T&gt;</code></td><td>Make all properties readonly</td></tr>
<tr><td><code>Record&lt;K, T&gt;</code></td><td>Create object type with keys K and values T</td></tr>
<tr><td><code>Pick&lt;T, K&gt;</code></td><td>Select subset of properties</td></tr>
<tr><td><code>Omit&lt;T, K&gt;</code></td><td>Remove properties</td></tr>
<tr><td><code>Exclude&lt;T, U&gt;</code></td><td>Exclude types from union</td></tr>
<tr><td><code>Extract&lt;T, U&gt;</code></td><td>Extract types from union</td></tr>
<tr><td><code>NonNilable&lt;T&gt;</code></td><td>Remove nil from type</td></tr>
<tr><td><code>Nilable&lt;T&gt;</code></td><td>Add nil to type</td></tr>
<tr><td><code>ReturnType&lt;T&gt;</code></td><td>Extract function return type</td></tr>
<tr><td><code>Parameters&lt;T&gt;</code></td><td>Extract function parameter types</td></tr>
</tbody>
</table>
</div>
<h2 id="partial"><a class="header" href="#partial">Partial<t></t></a></h2>
<p>Makes all properties of <code>T</code> optional.</p>
<h3 id="definition"><a class="header" href="#definition">Definition</a></h3>
<pre><code class="language-lua">type Partial&lt;T&gt; = {[K in keyof T]?: T[K]}
</code></pre>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<pre><code class="language-lua">interface User
    id: string
    name: string
    email: string
    age: number
end

type PartialUser = Partial&lt;User&gt;
-- Result:
-- {
--     id?: string,
--     name?: string,
--     email?: string,
--     age?: number
-- }

function updateUser(id: string, updates: PartialUser): void
    -- All fields are optional
    if updates.name ~= nil then
        setUserName(id, updates.name)
    end
    if updates.email ~= nil then
        setUserEmail(id, updates.email)
    end
end

updateUser("123", {name = "Alice"})  -- Only update name
updateUser("456", {email = "bob@example.com", age = 30})  -- Update multiple
</code></pre>
<h3 id="common-patterns"><a class="header" href="#common-patterns">Common Patterns</a></h3>
<pre><code class="language-lua">-- Partial update functions
function patch&lt;T&gt;(original: T, updates: Partial&lt;T&gt;): T
    return {...original, ...updates}
end

-- Optional configuration
interface Config
    host: string
    port: number
    ssl: boolean
end

const defaultConfig: Config = {host = "localhost", port = 8080, ssl = false}

function createServer(options?: Partial&lt;Config&gt;): Server
    const config = {...defaultConfig, ...options}
    return Server.new(config)
end
</code></pre>
<h2 id="required"><a class="header" href="#required">Required<t></t></a></h2>
<p>Makes all properties of <code>T</code> required (removes optional modifiers).</p>
<h3 id="definition-1"><a class="header" href="#definition-1">Definition</a></h3>
<pre><code class="language-lua">type Required&lt;T&gt; = {[K in keyof T]-?: T[K]}
</code></pre>
<h3 id="usage-1"><a class="header" href="#usage-1">Usage</a></h3>
<pre><code class="language-lua">interface PartialConfig
    host?: string
    port?: number
    ssl?: boolean
end

type Config = Required&lt;PartialConfig&gt;
-- Result:
-- {
--     host: string,
--     port: number,
--     ssl: boolean
-- }

function startServer(config: Config): void
    -- All fields guaranteed to exist
    print(`Server on ${config.host}:${config.port}`)
end

const partialConfig: PartialConfig = {host = "localhost"}
-- startServer(partialConfig)  -- ❌ Error: port and ssl missing

const fullConfig: Config = {host = "localhost", port = 8080, ssl = true}
startServer(fullConfig)  -- ✅ OK
</code></pre>
<h2 id="readonly"><a class="header" href="#readonly">Readonly<t></t></a></h2>
<p>Makes all properties of <code>T</code> readonly.</p>
<h3 id="definition-2"><a class="header" href="#definition-2">Definition</a></h3>
<pre><code class="language-lua">type Readonly&lt;T&gt; = {readonly [K in keyof T]: T[K]}
</code></pre>
<h3 id="usage-2"><a class="header" href="#usage-2">Usage</a></h3>
<pre><code class="language-lua">interface Point
    x: number
    y: number
end

type ReadonlyPoint = Readonly&lt;Point&gt;
-- Result:
-- {
--     readonly x: number,
--     readonly y: number
-- }

const p: ReadonlyPoint = {x = 10, y = 20}
-- p.x = 15  -- ❌ Error: Cannot assign to readonly property

function movePoint(p: Point, dx: number, dy: number): ReadonlyPoint
    return {x = p.x + dx, y = p.y + dy}
end
</code></pre>
<h2 id="recordk-t"><a class="header" href="#recordk-t">Record&lt;K, T&gt;</a></h2>
<p>Creates an object type with keys <code>K</code> and values <code>T</code>.</p>
<h3 id="definition-3"><a class="header" href="#definition-3">Definition</a></h3>
<pre><code class="language-lua">type Record&lt;K extends string | number, T&gt; = {[P in K]: T}
</code></pre>
<h3 id="usage-3"><a class="header" href="#usage-3">Usage</a></h3>
<pre><code class="language-lua">-- String keys
type StringMap = Record&lt;string, number&gt;
-- {[key: string]: number}

const counts: StringMap = {
    apples = 5,
    oranges = 3,
    bananas = 7
}

-- Literal union keys
type Status = "pending" | "active" | "completed"
type StatusRecord = Record&lt;Status, boolean&gt;
-- {
--     pending: boolean,
--     active: boolean,
--     completed: boolean
-- }

const statusFlags: StatusRecord = {
    pending = true,
    active = false,
    completed = false
}

-- Number keys
type Cache = Record&lt;number, string&gt;
const cache: Cache = {
    [1] = "one",
    [2] = "two",
    [3] = "three"
}
</code></pre>
<h2 id="pickt-k"><a class="header" href="#pickt-k">Pick&lt;T, K&gt;</a></h2>
<p>Selects a subset of properties from <code>T</code>.</p>
<h3 id="definition-4"><a class="header" href="#definition-4">Definition</a></h3>
<pre><code class="language-lua">type Pick&lt;T, K extends keyof T&gt; = {[P in K]: T[P]}
</code></pre>
<h3 id="usage-4"><a class="header" href="#usage-4">Usage</a></h3>
<pre><code class="language-lua">interface User
    id: string
    name: string
    email: string
    age: number
    password: string
end

-- Pick only public fields
type UserPreview = Pick&lt;User, "id" | "name" | "email"&gt;
-- Result:
-- {
--     id: string,
--     name: string,
--     email: string
-- }

function getPublicProfile(user: User): UserPreview
    return {
        id = user.id,
        name = user.name,
        email = user.email
    }
end

-- Pick single field
type UserId = Pick&lt;User, "id"&gt;  -- {id: string}
</code></pre>
<h2 id="omitt-k"><a class="header" href="#omitt-k">Omit&lt;T, K&gt;</a></h2>
<p>Removes properties from <code>T</code>.</p>
<h3 id="definition-5"><a class="header" href="#definition-5">Definition</a></h3>
<pre><code class="language-lua">type Omit&lt;T, K extends keyof T&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;
</code></pre>
<h3 id="usage-5"><a class="header" href="#usage-5">Usage</a></h3>
<pre><code class="language-lua">interface User
    id: string
    name: string
    email: string
    password: string
end

-- Omit sensitive fields
type PublicUser = Omit&lt;User, "password"&gt;
-- Result:
-- {
--     id: string,
--     name: string,
--     email: string
-- }

function sanitizeUser(user: User): PublicUser
    return {
        id = user.id,
        name = user.name,
        email = user.email
    }
end

-- Omit multiple fields
type UserWithoutMeta = Omit&lt;User, "id" | "password"&gt;
-- {name: string, email: string}
</code></pre>
<h2 id="excludet-u"><a class="header" href="#excludet-u">Exclude&lt;T, U&gt;</a></h2>
<p>Excludes types from a union.</p>
<h3 id="definition-6"><a class="header" href="#definition-6">Definition</a></h3>
<pre><code class="language-lua">type Exclude&lt;T, U&gt; = T extends U ? never : T
</code></pre>
<h3 id="usage-6"><a class="header" href="#usage-6">Usage</a></h3>
<pre><code class="language-lua">type All = "a" | "b" | "c" | "d"
type ExcludeAB = Exclude&lt;All, "a" | "b"&gt;
-- Result: "c" | "d"

type Primitive = string | number | boolean | nil
type NonNilPrimitive = Exclude&lt;Primitive, nil&gt;
-- Result: string | number | boolean

type Status = "pending" | "active" | "inactive" | "deleted"
type ActiveStatuses = Exclude&lt;Status, "deleted"&gt;
-- Result: "pending" | "active" | "inactive"
</code></pre>
<h2 id="extractt-u"><a class="header" href="#extractt-u">Extract&lt;T, U&gt;</a></h2>
<p>Extracts types from a union that are assignable to <code>U</code>.</p>
<h3 id="definition-7"><a class="header" href="#definition-7">Definition</a></h3>
<pre><code class="language-lua">type Extract&lt;T, U&gt; = T extends U ? T : never
</code></pre>
<h3 id="usage-7"><a class="header" href="#usage-7">Usage</a></h3>
<pre><code class="language-lua">type All = "a" | "b" | "c" | "d"
type ExtractAB = Extract&lt;All, "a" | "b" | "e"&gt;
-- Result: "a" | "b" (only types present in both)

type Mixed = string | number | boolean
type OnlyStrings = Extract&lt;Mixed, string&gt;
-- Result: string

type Status = "pending" | "active" | "completed" | "failed"
type CompletedStatuses = Extract&lt;Status, "completed" | "failed"&gt;
-- Result: "completed" | "failed"
</code></pre>
<h2 id="nonnilable"><a class="header" href="#nonnilable">NonNilable<t></t></a></h2>
<p>Removes <code>nil</code> from a type.</p>
<h3 id="definition-8"><a class="header" href="#definition-8">Definition</a></h3>
<pre><code class="language-lua">type NonNilable&lt;T&gt; = T extends nil ? never : T
</code></pre>
<h3 id="usage-8"><a class="header" href="#usage-8">Usage</a></h3>
<pre><code class="language-lua">type MaybeString = string | nil
type DefinitelyString = NonNilable&lt;MaybeString&gt;
-- Result: string

type Optional = number | string | nil
type Required = NonNilable&lt;Optional&gt;
-- Result: number | string

function requireValue&lt;T&gt;(value: T | nil): NonNilable&lt;T&gt;
    if value == nil then
        error("Value cannot be nil")
    end
    return value
end
</code></pre>
<h2 id="nilable"><a class="header" href="#nilable">Nilable<t></t></a></h2>
<p>Adds <code>nil</code> to a type.</p>
<h3 id="definition-9"><a class="header" href="#definition-9">Definition</a></h3>
<pre><code class="language-lua">type Nilable&lt;T&gt; = T | nil
</code></pre>
<h3 id="usage-9"><a class="header" href="#usage-9">Usage</a></h3>
<pre><code class="language-lua">type DefinitelyString = string
type MaybeString = Nilable&lt;DefinitelyString&gt;
-- Result: string | nil

function findUser(id: string): Nilable&lt;User&gt;
    return users[id]  -- May return nil
end

const user: Nilable&lt;User&gt; = findUser("123")
if user ~= nil then
    print(user.name)
end
</code></pre>
<h2 id="returntype"><a class="header" href="#returntype">ReturnType<t></t></a></h2>
<p>Extracts the return type of a function.</p>
<h3 id="definition-10"><a class="header" href="#definition-10">Definition</a></h3>
<pre><code class="language-lua">type ReturnType&lt;T&gt; = T extends (...args: any) =&gt; infer R ? R : never
</code></pre>
<h3 id="usage-10"><a class="header" href="#usage-10">Usage</a></h3>
<pre><code class="language-lua">function getUser(): {name: string, age: number}
    return {name = "Alice", age = 30}
end

type User = ReturnType&lt;typeof getUser&gt;
-- Result: {name: string, age: number}

function calculate(a: number, b: number): number
    return a + b
end

type CalculateResult = ReturnType&lt;typeof calculate&gt;
-- Result: number

-- With type alias
type FetchData = () =&gt; {id: string, value: number}
type Data = ReturnType&lt;FetchData&gt;
-- Result: {id: string, value: number}
</code></pre>
<h2 id="parameters"><a class="header" href="#parameters">Parameters<t></t></a></h2>
<p>Extracts the parameter types of a function as a tuple.</p>
<h3 id="definition-11"><a class="header" href="#definition-11">Definition</a></h3>
<pre><code class="language-lua">type Parameters&lt;T&gt; = T extends (...args: infer P) =&gt; any ? P : never
</code></pre>
<h3 id="usage-11"><a class="header" href="#usage-11">Usage</a></h3>
<pre><code class="language-lua">function add(a: number, b: number): number
    return a + b
end

type AddParams = Parameters&lt;typeof add&gt;
-- Result: [number, number]

function greet(name: string, greeting?: string): void
    print((greeting or "Hello") .. ", " .. name)
end

type GreetParams = Parameters&lt;typeof greet&gt;
-- Result: [string, string | nil]

-- Extract individual parameters
type FirstParam = AddParams[1]  -- number
type SecondParam = AddParams[2]  -- number
</code></pre>
<h2 id="advanced-combinations"><a class="header" href="#advanced-combinations">Advanced Combinations</a></h2>
<h3 id="deep-partial"><a class="header" href="#deep-partial">Deep Partial</a></h3>
<p>Make all nested properties optional:</p>
<pre><code class="language-lua">type DeepPartial&lt;T&gt; = {
    [K in keyof T]?: T[K] extends object ? DeepPartial&lt;T[K]&gt; : T[K]
}

interface Config
    database: {
        host: string
        port: number
    }
    cache: {
        enabled: boolean
        ttl: number
    }
end

type PartialConfig = DeepPartial&lt;Config&gt;
-- All nested properties are optional
const config: PartialConfig = {
    database = {host = "localhost"}  -- port optional
}
</code></pre>
<h3 id="deep-readonly"><a class="header" href="#deep-readonly">Deep Readonly</a></h3>
<p>Make all nested properties readonly:</p>
<pre><code class="language-lua">type DeepReadonly&lt;T&gt; = {
    readonly [K in keyof T]: T[K] extends object ? DeepReadonly&lt;T[K]&gt; : T[K]
}
</code></pre>
<h3 id="mutable-remove-readonly"><a class="header" href="#mutable-remove-readonly">Mutable (Remove Readonly)</a></h3>
<p>Remove readonly modifiers:</p>
<pre><code class="language-lua">type Mutable&lt;T&gt; = {
    -readonly [K in keyof T]: T[K]
}

interface ReadonlyUser
    readonly id: string
    readonly name: string
end

type MutableUser = Mutable&lt;ReadonlyUser&gt;
-- {id: string, name: string}
</code></pre>
<h3 id="nullable-add-nil-to-all-properties"><a class="header" href="#nullable-add-nil-to-all-properties">Nullable (Add nil to all properties)</a></h3>
<pre><code class="language-lua">type Nullable&lt;T&gt; = {
    [K in keyof T]: T[K] | nil
}

interface User
    name: string
    age: number
end

type NullableUser = Nullable&lt;User&gt;
-- {name: string | nil, age: number | nil}
</code></pre>
<h2 id="practical-examples"><a class="header" href="#practical-examples">Practical Examples</a></h2>
<h3 id="api-response-types"><a class="header" href="#api-response-types">API Response Types</a></h3>
<pre><code class="language-lua">interface ApiResponse&lt;T&gt;
    data: T
    status: number
    error?: string
end

type UserResponse = ApiResponse&lt;User&gt;
type UsersResponse = ApiResponse&lt;User[]&gt;
type PartialUserResponse = ApiResponse&lt;Partial&lt;User&gt;&gt;
</code></pre>
<h3 id="form-state"><a class="header" href="#form-state">Form State</a></h3>
<pre><code class="language-lua">interface FormState&lt;T&gt;
    values: T
    errors: Partial&lt;Record&lt;keyof T, string&gt;&gt;
    touched: Partial&lt;Record&lt;keyof T, boolean&gt;&gt;
end

interface LoginForm
    email: string
    password: string
end

type LoginFormState = FormState&lt;LoginForm&gt;
</code></pre>
<h3 id="configuration-builder"><a class="header" href="#configuration-builder">Configuration Builder</a></h3>
<pre><code class="language-lua">interface FullConfig
    host: string
    port: number
    ssl: boolean
    timeout: number
end

const defaults: FullConfig = {
    host = "localhost",
    port = 8080,
    ssl = false,
    timeout = 5000
}

function buildConfig(options: Partial&lt;FullConfig&gt;): Required&lt;FullConfig&gt;
    return {...defaults, ...options}
end
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="../language/advanced-types.html">Advanced Types</a> — Detailed explanations and examples</li>
<li><a href="../language/type-system.html">Type System</a> — Core type system features</li>
<li><a href="../language/type-system.html#generics">Generics</a> — Generic type parameters</li>
</ul>

                </section>

                </div><!-- page-inner -->

            </div><!-- page-wrapper -->

            </div><!-- book-inner -->

            <!-- Version Selector -->
            <nav class="nav-wide-wrapper" aria-label="More">
                <a href="javascript:void(0)" id="menu-bar-wide" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </a>
            </nav>

            <!-- Version selector dropdown -->
            <div id="version-selector" class="version-selector">
                <select id="version-picker" onchange="switchVersion(this.value)" aria-label="Documentation version">
                    <option value="latest">Latest</option>
                </select>
            </div>

        </div><!-- book -->

        <!-- Custom scripts -->
        <script>
            // Version selector functionality
            function switchVersion(version) {
                const base = window.location.origin + '/luanext/';
                if (version === 'latest') {
                    window.location.href = base;
                } else {
                    window.location.href = base + version + '/';
                }
            }

            // Load versions.json and populate selector if it exists
            fetch('/luanext/versions.json')
                .then(response => response.json())
                .then(data => {
                    if (data.versions && data.versions.length > 1) {
                        const selector = document.getElementById('version-picker');
                        data.versions.forEach(v => {
                            if (v.version !== 'latest') {
                                const option = document.createElement('option');
                                option.value = 'v' + v.version;
                                option.textContent = 'v' + v.version;
                                selector.appendChild(option);
                            }
                        });
                    }
                })
                .catch(() => {
                    // versions.json not found (expected during initial setup)
                    // Selector will only show "Latest"
                });
        </script>

        <!-- mdBook scripts and content scripts -->
        <script src="js/clipboard.min.js" type="text/javascript"></script>
        <script src="js/highlight.js" type="text/javascript"></script>
        <script src="js/book.js" type="text/javascript"></script>

        <!-- Custom theme script -->
        <script src="js/custom-theme.js" type="text/javascript"></script>

        <script src="js/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/lunr-en.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/search.js" type="text/javascript" charset="utf-8"></script>

    </body>
</html>
